<!DOCTYPE html>
<!-- saved from url=(0117)https://cluster41-files.instructure.com/courses/9870~109/files/9870~6430/course%20files/unit_callbacks/callbacks.html -->
<html lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <title>Callbacks &amp; JSON</title>

  </head>
  <body>

    <p>Empty HTML doc :) Some JS is running. Save me to your machine.</p>

    <script>

    function parseRandom(deets) {
      const obj = JSON.parse(deets)
      const res = obj.results[0];
      const profile = {
        first: res.name.first,
        last: res.name.last,
        picture: res.picture.large,

      }
      console.log(deets)
      document.write(profile.first)
      document.write(profile.last)
      document.write(`<img onclick="getUser(parseRandom)" src="${profile.picture}"</img>`)

    };

    getUser = (callback) => {
      // This function uses AJAX to hit the random user API.
      // More info: https://randomuser.me

      var request = new XMLHttpRequest();
      request.open('GET', 'https://randomuser.me/api/', true);
      request.onload = function () {
        /* You'll start here */
        callback(request.response);
      };

      request.send();
    }
    getUser(parseRandom); // Execute the function
    // getRandomUser();
    </script>


</body>
<footer>
  <button >Click me for new user  </button>
</footer>
  </html>
